<!DOCTYPE html>
<!-- saved from url=(0072)https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html -->
<html class="v2" dir="ltr" lang="auto" style="height: 100%;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://www.blogger.com/static/v1/widgets/3566091532-css_bundle_v2.css" rel="stylesheet" type="text/css">
<meta content="width=1100" name="viewport">

<meta content="blogger" name="generator">
<link href="https://neopythonic.blogspot.com/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="Neopythonic - Atom" href="https://neopythonic.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="Neopythonic - RSS" href="https://neopythonic.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="Neopythonic - Atom" href="https://www.blogger.com/feeds/4195135246107166251/posts/default">

<link rel="alternate" type="application/atom+xml" title="Neopythonic - Atom" href="https://neopythonic.blogspot.com/feeds/5401046714209368399/comments/default">
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content="http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html" property="og:url">
<meta content="Tail Recursion Elimination" property="og:title">
<meta content="I recently posted an entry in my Python History blog on the origins of Python&#39;s functional features .  A side remark about not supporting ta..." property="og:description">
<title>Neopythonic: Tail Recursion Elimination</title>
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Blogger
URL:      www.blogger.com
----------------------------------------------- */
/* Content
----------------------------------------------- */
body {
font: normal normal 14px 'Trebuchet MS', Trebuchet, Verdana, sans-serif;
color: #666666;
background: #ffffff none repeat scroll top left;
padding: 0 0 0 0;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2288bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #33aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 0 #333333;
box-shadow: 0 0 0 rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 40px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 36px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
color: #000000;
text-shadow: 0 0 0 rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #000000;
}
.Header .description {
font-size: 18px;
color: #000000;
}
.header-inner .Header .titlewrapper {
padding: 22px 0;
}
.header-inner .Header .descriptionwrapper {
padding: 0 0;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 0 solid #dddddd;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #dddddd;
border-left: 1px solid #dddddd;
border-right: 1px solid #dddddd;
}
.tabs-inner .widget ul {
background: transparent none repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #dddddd;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px 'Trebuchet MS', Trebuchet, Verdana, sans-serif;
color: #000000;
border-left: 1px solid #ffffff;
border-right: 1px solid #dddddd;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid transparent;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid transparent;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid transparent;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: #bbbbbb;
color: #ffffff;
padding: 0.4em;
letter-spacing: 3px;
margin: inherit;
}
.main-inner {
padding-top: 35px;
padding-bottom: 65px;
}
.main-inner .column-center-inner {
padding: 0 0;
}
.main-inner .column-center-inner .section {
margin: 0 1em;
}
.post {
margin: 0 0 45px 0;
}
h3.post-title, .comments h4 {
font: normal normal 28px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #666666;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #eeeeee;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid transparent;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #eeeeee;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid transparent;
}
.blog-pager {
background: transparent url(https://resources.blogblog.com/blogblog/data/1kt/simple/paging_dot.png) repeat-x scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 1px dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #666666;
}
.mobile-link-button {
background-color: #2288bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #dddddd;
border-bottom: 1px solid #dddddd;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #dddddd;
}

--></style>
<style id="template-skin-1" type="text/css"><!--
body {
min-width: 900px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 900px;
max-width: 900px;
_width: 900px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 250px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 250px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("250px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 250px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 250px;
margin-right: -250px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
body#layout div.add_widget {
padding: 8px;
}
body#layout div.add_widget a {
margin-left: 32px;
}
--></style>
<link href="./Neopythonic_ Tail Recursion Elimination_files/authorization.css" media="none" onload="if(media!=&#39;all&#39;)media=&#39;all&#39;" rel="stylesheet"><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=4195135246107166251&amp;zx=06cd5ca0-2e1d-472f-ab50-7e2437f61e40' rel='stylesheet'/></noscript>
<meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109">
<meta name="google-adsense-platform-domain" content="blogspot.com">

<script type="text/javascript" src="./Neopythonic_ Tail Recursion Elimination_files/f.txt"></script><style>.gc-bubbleDefault{background-color:transparent!important;text-align:left;padding:0!important;margin:0!important;border:0!important;table-layout:auto!important}.gc-reset{background-color:transparent!important;border:0!important;padding:0!important;margin:0!important;text-align:left}.pls-bubbleTop{border-bottom:1px solid #ccc!important}.pls-contentLeft,.pls-topTail,.pls-vertShimLeft{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/border_3.gif)!important}.pls-topTail{background-repeat:repeat-x!important;background-position:bottom!important}.pls-vertShim{background-color:#fff!important;text-align:right}.tbl-grey .pls-vertShim{background-color:#f5f5f5!important}.pls-vertShimLeft{background-repeat:repeat-y!important;background-position:100%!important;height:4px}.pls-vertShimRight{height:4px}.pls-confirm-container .pls-vertShim{background-color:#fff3c2!important}.pls-contentWrap{background-color:#fff!important;position:relative!important;vertical-align:top}.pls-contentLeft{background-repeat:repeat-y;background-position:100%;vertical-align:top}.pls-dropRight{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropR_3.png)!important;background-repeat:repeat-y!important;vertical-align:top}.pls-dropBL,.pls-dropTR .pls-dropBR,.pls-tailleft,.pls-vert,.pls-vert img{vertical-align:top}.pls-dropBottom{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropB_3.png)!important;background-repeat:repeat-x!important;width:100%;vertical-align:top}.pls-topLeft{background:inherit!important;text-align:right;vertical-align:bottom}.pls-topRight{background:inherit!important;text-align:left;vertical-align:bottom}.pls-bottomLeft{background:inherit!important;text-align:right}.pls-bottomRight{background:inherit!important;text-align:left;vertical-align:top}.pls-tailbottom,.pls-tailleft,.pls-tailright,.pls-tailtop{display:none;position:relative}.pls-dropBL,.pls-dropBR,.pls-dropTR,.pls-tailbottom,.pls-tailleft,.pls-tailright,.pls-tailtop{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite_3.png)!important;background-repeat:no-repeat}.tbl-grey .pls-dropBL,.tbl-grey .pls-dropBR,.tbl-grey .pls-dropTR,.tbl-grey .pls-tailbottom,.tbl-grey .pls-tailleft,.tbl-grey .pls-tailright,.tbl-grey .pls-tailtop{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite-grey.png)!important}.pls-tailbottom{background-position:-23px 0}.pls-confirm-container .pls-tailbottom{background-position:-23px -10px}.pls-tailtop{background-position:-19px -20px}.pls-tailright{background-position:0 0}.pls-tailleft{background-position:-10px 0}.pls-tailtop{vertical-align:top}.gc-bubbleDefault td{line-height:0;font-size:0}.pls-tailbottom,.pls-topLeft img,.pls-topRight img{vertical-align:bottom}.bubbleDropTR,.pls-bottomLeft,.pls-bottomLeft img,.pls-dropBottom img,.pls-dropBottomL img,.pls-dropBottomR img{vertical-align:top}.pls-dropTR{background-position:0 -22px}.pls-dropBR{background-position:0 -27px}.pls-dropBL{background-position:0 -16px}.pls-spacerbottom,.pls-spacerleft,.pls-spacerright,.pls-spacertop{position:static!important}.pls-spinner{bottom:0;position:absolute;left:0;margin:auto;right:0;top:0}</style><script>(function(){(function injection() {
  var pageLang = 'en';
  var userLang = 'ru';

  var uid = '1E07F158C6FA4460B352973E9693B329';
  var teId = 'TE_' + uid;
  var cbId = 'TECB_' + uid;

  function show() {
    window.setTimeout(function() {
      window[teId].showBanner(true);
    }, 10);
  }

  function newElem() {
    var elem = new google.translate.TranslateElement({
      autoDisplay: false,
      floatPosition: 0,
      multilanguagePage: true,
      pageLanguage: pageLang
    });
    return elem;
  }

  if (window[teId]) {
    show();
  } else {
    if (!window.google || !google.translate ||
        !google.translate.TranslateElement) {
      if (!window[cbId]) {
        window[cbId] = function() {
          window[teId] = newElem();
          show();
        };
      }
      let ttPolicy = {createScriptURL: s => s};
      if (typeof trustedTypes != 'undefined') {
        ttPolicy = trustedTypes.createPolicy('gtx', ttPolicy);
      }
      var s = document.createElement('script');
      // We couldn't use safedom because this function is stringified and then
      // passed to executeScript in main.js.
      s.src = ttPolicy.createScriptURL(
          'https://translate.google.com/translate_a/element.js?cb=' +
          encodeURIComponent(cbId) + '&client=tee&hl=' + userLang + '&nsc=1');
      document.getElementsByTagName('head')[0].appendChild(s);
    }
  }
})();})();</script><script src="./Neopythonic_ Tail Recursion Elimination_files/element.js.Без названия"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./Neopythonic_ Tail Recursion Elimination_files/m=el_main_css"><script type="text/javascript" charset="UTF-8" src="./Neopythonic_ Tail Recursion Elimination_files/m=el_main"></script></head>
<body class=" variant-simplysimple" style="position: relative; min-height: 100%; top: 0px;"><div class="skiptranslate" style="display: none;"><iframe id=":0.container" class="VIpgJd-ZVi9od-ORHb-OEVmcd skiptranslate" frameborder="0" src="./Neopythonic_ Tail Recursion Elimination_files/tail-recursion-elimination.html" style="visibility:visible"></iframe></div>
<div class="navbar section" id="navbar" name="Navbar"><div class="widget Navbar" data-version="1" id="Navbar1"><script src="./Neopythonic_ Tail Recursion Elimination_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="" tabindex="0" vspace="0" width="100%" id="navbar-iframe" name="navbar-iframe" src="./Neopythonic_ Tail Recursion Elimination_files/navbar.html"></iframe></div>
<script type="text/javascript" src="./Neopythonic_ Tail Recursion Elimination_files/platform.js.Без названия" gapi_processed="true"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d4195135246107166251\x26blogName\x3dNeopythonic\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://neopythonic.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttps://neopythonic.blogspot.com/\x26targetPostID\x3d5401046714209368399\x26blogPostOrPageUrl\x3dhttps://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html\x26vt\x3d6657198052064482274',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class="body-fauxcolumns">
<div class="fauxcolumn-outer body-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content">
<div class="content-fauxcolumns">
<div class="fauxcolumn-outer content-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content-outer">
<div class="content-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left content-fauxborder-left">
<div class="fauxborder-right content-fauxborder-right"></div>
<div class="content-inner">
<header>
<div class="header-outer">
<div class="header-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left header-fauxborder-left">
<div class="fauxborder-right header-fauxborder-right"></div>
<div class="region-inner header-inner">
<div class="header section" id="header" name="Header"><div class="widget Header" data-version="1" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">
<a href="https://neopythonic.blogspot.com/">
Neopythonic
</a>
</h1>
</div>
<div class="descriptionwrapper">
<p class="description"><span>Ramblings through technology, politics, culture and philosophy by the creator of the Python programming language.</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class="header-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</header>
<div class="tabs-outer">
<div class="tabs-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left tabs-fauxborder-left">
<div class="fauxborder-right tabs-fauxborder-right"></div>
<div class="region-inner tabs-inner">
<div class="tabs no-items section" id="crosscol" name="Cross-Column"></div>
<div class="tabs no-items section" id="crosscol-overflow" name="Cross-Column 2"></div>
</div>
</div>
<div class="tabs-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="main-outer">
<div class="main-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left main-fauxborder-left">
<div class="fauxborder-right main-fauxborder-right"></div>
<div class="region-inner main-inner">
<div class="columns fauxcolumns">
<div class="fauxcolumn-outer fauxcolumn-center-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-left-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-right-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class="columns-inner">
<div class="column-center-outer">
<div class="column-center-inner">
<div class="main section" id="main" name="Main"><div class="widget Blog" data-version="1" id="Blog1">
<div class="blog-posts hfeed">

          <div class="date-outer">
        
<h2 class="date-header"><span>Wednesday, April 22, 2009</span></h2>

          <div class="date-posts">
        
<div class="post-outer">
<div class="post hentry uncustomized-post-template" itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<meta content="4195135246107166251" itemprop="blogId">
<meta content="5401046714209368399" itemprop="postId">
<a name="5401046714209368399"></a>
<h3 class="post-title entry-title" itemprop="name">
Tail Recursion Elimination
</h3>
<div class="post-header">
<div class="post-header-line-1"></div>
</div>
<div class="post-body entry-content" id="post-body-5401046714209368399" itemprop="description articleBody">
I recently posted an entry in my Python History blog on <a href="http://python-history.blogspot.com/2009/04/origins-of-pythons-functional-features.html">the origins of Python's functional features</a>.  A side remark about not supporting tail recursion elimination (TRE) immediately sparked several comments about what a pity it is that Python doesn't do this, including links to recent <a href="http://fiber-space.de/wordpress/?p=349">blog entries</a> by others trying to "prove" that TRE can be added to Python easily.  So let me defend my position (which is that I don't <span style="font-style: italic;">want</span> TRE in the language).  If you want a short answer, it's simply unpythonic. Here's the long answer:<br><br><span style="font-weight: bold;">First,</span> as one commenter remarked, TRE is incompatible with nice stack traces: when a tail recursion is eliminated, there's no stack frame left to use to print a traceback when something goes wrong later.  This will confuse users who inadvertently wrote something recursive (the recursion isn't obvious in the stack trace printed), and makes debugging hard.  Providing an option to disable TRE seems wrong to me: Python's default is and should always be to be maximally helpful for debugging.  This also brings me to the next issue:<br><br><span style="font-weight: bold;">Second,</span> the idea that TRE is merely an optimization, which each Python implementation can choose to implement or not, is wrong.  Once tail recursion elimination exists, developers will start writing code that <span style="font-style: italic;">depends</span> on it, and their code won't run on implementations that don't provide it: a typical Python implementation allows 1000 recursions, which is plenty for non-recursively written code and for code that recurses to traverse, for example, a typical parse tree, but not enough for a recursively written loop over a large list.<br><br><span style="font-weight: bold;">Third,</span> I don't believe in recursion as the basis of all programming.  This is a fundamental belief of certain computer scientists, especially those who love Scheme and like to teach programming by starting with a "cons" cell and recursion.  But to me, seeing recursion as the basis of everything else is just a nice theoretical approach to fundamental <span style="font-style: italic;">mathematics</span> (<a href="http://en.wikipedia.org/wiki/Turtles_all_the_way_down">turtles all the way down</a>), not a day-to-day tool.<br><br>For practical purposes, Python-style lists (which are flexible arrays, not linked lists), and sequences in general, are much more useful to start exploring the wonderful world of programming than recursion.  They are some of the most important tools for experienced Python programmers, too.  Using a linked list to represent a sequence of value is distinctly unpythonic, and in most cases very inefficient.  Most of Python's library is written with sequences and iterators as fundamental building blocks (and dictionaries, of course), not linked lists, so you'd be locking yourself out of a lot of pre-defined functionality by <span style="font-style: italic;">not</span> using lists or sequences.<br><br><span style="font-weight: bold;">Last,</span> let's look at how we could implement tail recursion elimination.  The first observation is that you can't do it at compile time.  I've seen at least <a href="http://www.teamrubber.com/blog/python-tail-optimisation-using-byteplay/">one blog entry</a> that used a bytecode hack to replace a CALL opcode immediately before a RETURN opcode with a jump to the top of the function body.  This may be a nice demo, but unfortunately Python's compiler cannot reliably determine whether any particular call is actually reference the current function, even if it appears to have the same name.  Consider this simple example:<br><blockquote><pre>def f(x):<br>     if x &gt; 0:<br>            return f(x-1)<br>    return 0</pre></blockquote><br>It looks like you could replace the body with something like this:<br><blockquote><pre>if x &gt; 0:<br>    x = x-1<br>    &lt;jump to top&gt;<br>return 0</pre></blockquote><br>This seems simple enough, but now add this:<br><blockquote><pre>g = f<br>def f(x):<br>      return x<br>g(5)</pre></blockquote><br>The call to g(5) invokes the earlier f, but the "recursive" call no longer recurses!  At run-time, the name 'f' is rebound to the later non-recursive definition, so the returned value is 4, not 0.  While I agree that this particual example is bad style, it is a well-defined part of Python's semantics that has plenty of legitimate uses, and a compiler that made this replacement in the optimistic hope that f's definition will remain unchanged would introduce enough bugs in real-world code to cause an outrage.<br><br><a href="http://fiber-space.de/wordpress/?p=349">Another blog post</a> showed decorators that can be used to implement tail recursion using magical exceptions or return values.  These can be written in plain Python (though that post shows an optimized Cython version that is claimed to be "only 10% slower", though it doesn't seem to be thread-safe). If this tickles your fancy I won't try to stop you, but I would strongly object against inclusion of something like this in the core distribution: there are many caveats to the use of such a decorator, since it has to assume that <span style="font-style: italic;">any</span> recursive call (in the decorated function) is tail-recursive and can be eliminated.  In the hands of less experienced users this could easily lead to disasters. For example, the common recursive definition of factorial is not tail-recursive:<br><blockquote><pre>def fact(n):<br>      if n &gt; 1:<br>            return n * fact(n-1)<br>      return 1</pre></blockquote><br>There are also plenty of functions that contain a tail-recursive call and another recursive call that isn't tail-recursive; the decorators don't handle such cases.  Another subtlety that those decorators don't handle is tail-recursive calls inside try blocks: these may <span style="font-style: italic;">look</span> like they could be eliminated, but they can't, because TRE could remove the exception handling which is guaranteed by the language.  For all these reasons I think the decorator approach is doomed, at least for a general audience.<br><br><span style="font-weight: bold;">Still,</span> if someone was determined to add TRE to CPython, they could modify the compiler roughly as follows.  First, determine "safe" tail-recursive call sites.  This would be something like a CALL opcode immediately followed by a RETURN opcode, and completely outside any try blocks.  (Note: I'm ignoring the different CALL_* opcodes, which should be easy enough to handle using the same approach.)  Next, replace each such CALL-RETURN opcode pair with a single CALL_RETURN opcode.  There's no need for the compiler to try and check if the name of the function being called is the same as the current function: the new opcode can represent savings for all CALL+RETURN combinations merely by saving the time to decode a second opcode. If at run time the determination is made that this particular call is not applicable for TRE, the usual actions for a CALL followed by a RETURN opcode are carried out. (I suppose you could add some kind of caching mechanism indexed by call site to speed up the run-time determination.)<br><br>In the determination of wheter TRE can be applied, there are several levels of aggressiveness that you could apply.   <jump to="" top="">The least aggressive, "vanilla" approach would only optimize the call if the object being called is the function that is already running in the current stack frame.  All we have to do at this point is clear the locals out of the current stack frame</jump> (and other hidden state like active loops)<jump to="" top="">, set the arguments from the evaluation stack, and jump to the top.  (Subtlety: the new arguments are, by definition, in the current stack frame.  It's probably just a matter of copying them first.  More subtleties are caused by the presence of keyword arguments, variable length argument lists, and default argument values.  It's all a simple matter of programming though.)<br><br>A more aggressive version would also recognize the situation where a <span style="font-style: italic;">method</span> is tail recursive (i.e. the object being called is a bound method whose underlying function is the same as the one in the current stack frame).  This just requires a bit more programming; the CPython interpreter code (ceval.c) already has an optimization for method calls. ( I don't know how useful this would be though: I expect the tail recursive style to be popular with programmers who like to use a functional programming style overall, and would probably not be using classes that much. :-)<br><br>In theory, you could even optimize all cases where the object being called is a function or method written in Python, as long as the number of local variables needed for the new call can be accommodated in the current stack frame object. (Frame objects in CPython are allocated on the heap and have a variable allocation size based on the required space for the locals; there is already machinery for reusing frame objects.)  This would optimize mutually tail-recursive functions, which otherwise wouldn't be optimized.  Alas, it would also disable stack traces in most cases, so it would probably not be a good idea.<br><br>A more benign variant would be to create Python-level stack frames objects just like before, but reuse the C stack frame.  This would create an approximation of <a href="http://www.stackless.com/">Stackless Python</a>, though it would still be easy enough to run out of C stack by recursing through a built-in function or method.<br><br>Of course, none of this does anything to address my first three arguments. Is it really such a big deal to rewrite your function to use a loop? (After all TRE <span style="font-style: italic;">only</span> addresses recursion that <span style="font-style: italic;">can</span> easily be replaced by a loop. :-)<br></jump>
<div style="clear: both;"></div>
</div>
<div class="post-footer">
<div class="post-footer-line post-footer-line-1">
<span class="post-author vcard">
Posted by
<span class="fn" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
<meta content="https://www.blogger.com/profile/12821714508588242516" itemprop="url">
<a class="g-profile" href="https://www.blogger.com/profile/12821714508588242516" rel="author" title="author profile">
<span itemprop="name">Guido van Rossum</span>
</a>
</span>
</span>
<span class="post-timestamp">
at
<meta content="http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html" itemprop="url">
<a class="timestamp-link" href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html" rel="bookmark" title="permanent link"><abbr class="published" itemprop="datePublished" title="2009-04-22T13:06:00-07:00">1:06 PM</abbr></a>
</span>
<span class="post-comment-link">
</span>
<span class="post-icons">
<span class="item-control blog-admin pid-1774424698">
<a href="https://www.blogger.com/post-edit.g?blogID=4195135246107166251&amp;postID=5401046714209368399&amp;from=pencil" title="Edit Post">
<img alt="" class="icon-action" height="18" src="./Neopythonic_ Tail Recursion Elimination_files/icon18_edit_allbkg.gif" width="18">
</a>
</span>
</span>
<div class="post-share-buttons goog-inline-block">
</div>
</div>
<div class="post-footer-line post-footer-line-2">
<span class="post-labels">
</span>
</div>
<div class="post-footer-line post-footer-line-3">
<span class="post-location">
</span>
</div>
</div>
</div>
<div class="comments" id="comments">
<a name="comments"></a>
<h4>66 comments:</h4>
<div id="Blog1_comments-block-wrapper">
<dl class="avatar-comment-indent" id="comments-block">
<dt class="comment-author " id="c2033890544364430050">
<a name="c2033890544364430050"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/09797150930381157360" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2033890544364430050-09797150930381157360"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/-WFjQkinQSpE/T0QJnj522cI/AAAAAAAAAoQ/SQ6n84yX9_s/s35/visita-marta_2012-01-27_034_256.JPG" alt="" title="paurullan">

<noscript><img src="//3.bp.blogspot.com/-WFjQkinQSpE/T0QJnj522cI/AAAAAAAAAoQ/SQ6n84yX9_s/s35/visita-marta_2012-01-27_034_256.JPG" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/09797150930381157360" rel="nofollow">paurullan</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2033890544364430050">
<p>
Precisely today I was reading «Lambda the Ultimate» original paper and thought about why my favourite language would not have this.<br><br>Lots of thank you for the post!
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240434720000#c2033890544364430050" title="comment permalink">
April 22, 2009 at 2:12 PM
</a>
<span class="item-control blog-admin pid-1024014587">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2033890544364430050" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5859875738951617454">
<a name="c5859875738951617454"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5859875738951617454">
<p>
How very pythonic of you to make up stupid reasons for not implementing a very simple optimization.<br><br>This is very pythonic because it shows poor decision making, poor performance and immature ideology.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240435680000#c5859875738951617454" title="comment permalink">
April 22, 2009 at 2:28 PM
</a>
<span class="item-control blog-admin pid-828233970">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5859875738951617454" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6113567504727185943">
<a name="c6113567504727185943"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10553068264752473152" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6113567504727185943-10553068264752473152"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="ablakok">

</a></span></div>
<a href="https://www.blogger.com/profile/10553068264752473152" rel="nofollow">ablakok</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6113567504727185943">
<p>
Tail recursion elimination is necessary in functional languages with no side effects, like scheme, but not in a language with explicit state like Python.<br><br>Even with languages that have it one usually uses some sort of loop abstraction that looks like an iterator in order to make it more palatable.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240436760000#c6113567504727185943" title="comment permalink">
April 22, 2009 at 2:46 PM
</a>
<span class="item-control blog-admin pid-2040617800">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6113567504727185943" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6625776998599755880">
<a name="c6625776998599755880"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13665641102508209349" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6625776998599755880-13665641102508209349"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Matthias">

</a></span></div>
<a href="https://www.blogger.com/profile/13665641102508209349" rel="nofollow">Matthias</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6625776998599755880">
<p>
Guido, I share your believe that programmers would come to rely on tail recursion elimination. The loss of debugging information is also a drawback.<br><br>However are you not too harsh on tail recursion elimination? The key to recognize tail recursion is not whether a method calls itself, but whether the function immediatly returns after the last call.<br><br>For example:<br><br>def f(x):<br>y = do_something()<br>return g(x, y)<br><br>Here when the call to g is evaluated, it can return right to the caller of f and need not look at f itself again.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240439340000#c6625776998599755880" title="comment permalink">
April 22, 2009 at 3:29 PM
</a>
<span class="item-control blog-admin pid-1264367290">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6625776998599755880" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c3693569213733000207">
<a name="c3693569213733000207"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3693569213733000207-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3693569213733000207">
<p>
Matthias: If you read on until the end, you'll see that I covered that very issue. (At least I think I did. :-)<br><br>destroyopenid: Your words are pure poetry. Very nice troll!
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240439340001#c3693569213733000207" title="comment permalink">
April 22, 2009 at 3:29 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=3693569213733000207" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1548875956702723153">
<a name="c1548875956702723153"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13665641102508209349" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1548875956702723153-13665641102508209349"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Matthias">

</a></span></div>
<a href="https://www.blogger.com/profile/13665641102508209349" rel="nofollow">Matthias</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1548875956702723153">
<p>
Yes, you seem cover this.  Sorry.<br><br>I should get more sleep instead of posting late night comments.<br><br>But your last remark in parentheses still strikes me as simplified.  TRE does not only help with loop-like recursions, but also with implementing continuation passing style programs.<br><br>(And if one thinks a little harder, one may come up with a less outlandish use case than CPS that's different to loops.)<br><br>Something different: Lack of TRE does not really hinder Python's FP capabilities, as you can always just encapsulate your loops in combinators.  Nobody cares whether filter, map and reduce use recursion or loops in their implementation.  And Python's closures work just fine.<br><br>The lack of persistent data structures does however put a damper on FP in Python.  To be more presice: I wish there was a Pythonic persistent alternative to dict.  Like Strings are persistent already and a pleasure to work with.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240440000000#c1548875956702723153" title="comment permalink">
April 22, 2009 at 3:40 PM
</a>
<span class="item-control blog-admin pid-1264367290">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1548875956702723153" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c2969554109630024605">
<a name="c2969554109630024605"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2969554109630024605-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2969554109630024605">
<p>
Matthias: Tell me how I debug a program that uses continuation passing. :-)<br><br>I think you mean immutable, not persistent.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240440540000#c2969554109630024605" title="comment permalink">
April 22, 2009 at 3:49 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2969554109630024605" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7963753238874712649">
<a name="c7963753238874712649"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10237023548706204076" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7963753238874712649-10237023548706204076"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Paul Driver">

</a></span></div>
<a href="https://www.blogger.com/profile/10237023548706204076" rel="nofollow">Paul Driver</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7963753238874712649">
<p>
I think he means persistent in the Clojure sense of the word, which is a definition Rich Hickey seems to have invented.  It essentially means 'immutable with efficient structural sharing'.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240441980000#c7963753238874712649" title="comment permalink">
April 22, 2009 at 4:13 PM
</a>
<span class="item-control blog-admin pid-147688299">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7963753238874712649" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5444158932583159731">
<a name="c5444158932583159731"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03332537222647784056" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5444158932583159731-03332537222647784056"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/03332537222647784056" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5444158932583159731">
<p>
Rich Hickey did not invent <a href="http://en.wikipedia.org/wiki/Persistent_data_structure" rel="nofollow">persistent data structures</a> or the term.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240444440000#c5444158932583159731" title="comment permalink">
April 22, 2009 at 4:54 PM
</a>
<span class="item-control blog-admin pid-533916473">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5444158932583159731" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8672785390279624431">
<a name="c8672785390279624431"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13716765530135421686" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8672785390279624431-13716765530135421686"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="dasil003">

</a></span></div>
<a href="https://www.blogger.com/profile/13716765530135421686" rel="nofollow">dasil003</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8672785390279624431">
<p>
I disagree Guido.  destroyopenid's troll was hamfisted and barely specious.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240444500000#c8672785390279624431" title="comment permalink">
April 22, 2009 at 4:55 PM
</a>
<span class="item-control blog-admin pid-675931250">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=8672785390279624431" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4762970337348276197">
<a name="c4762970337348276197"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/11632047208239634206" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4762970337348276197-11632047208239634206"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Steven Huwig">

</a></span></div>
<a href="https://www.blogger.com/profile/11632047208239634206" rel="nofollow">Steven Huwig</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4762970337348276197">
<p>
Rickey wasn't the first to apply "persistent" to persistent data structures. <a href="http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf" rel="nofollow">Okasaki</a> cites Driscoll, Sarnak, Sleator, and Tarjan's 1986 article <a href="http://doi.acm.org/10.1145/12130.12142" rel="nofollow">Making data structures persistent</a>.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240444980000#c4762970337348276197" title="comment permalink">
April 22, 2009 at 5:03 PM
</a>
<span class="item-control blog-admin pid-28511442">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4762970337348276197" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6708296643577739717">
<a name="c6708296643577739717"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/11442714620753651697" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6708296643577739717-11442714620753651697"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/11442714620753651697" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6708296643577739717">
<p>
I totally agree with this post. My perspective is someone in late 20s who learned programming from the SICP / computing-the-length-of-an-array-is-a-good-idea school and switched to Python in mid 2004. I still think SICP is a great way to learn programming, but I've since come to see TRE as an abomination. <br><br>Teaching young people to use recursion for algorithms that are not recursive is a bad idea - it encourages the sort of narrow-mindedness and ham-handedness that makes for convoluted, difficult-to-understand programs.<br><br>Having said this, I don't have a serious problem with, say, GCC eliminating tail calls in a release compile as an optimization. The problem stems from the elevation of TRE to dogma and the proramming style such dogma encourages.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240446060000#c6708296643577739717" title="comment permalink">
April 22, 2009 at 5:21 PM
</a>
<span class="item-control blog-admin pid-500056063">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6708296643577739717" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6450008436153195192">
<a name="c6450008436153195192"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/11632047208239634206" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6450008436153195192-11632047208239634206"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Steven Huwig">

</a></span></div>
<a href="https://www.blogger.com/profile/11632047208239634206" rel="nofollow">Steven Huwig</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6450008436153195192">
<p>
The main advantage of recursive definitions is that you can easily prove properties about them using mathematical induction -- even using automated systems like <a href="http://www.cs.utexas.edu/users/moore/acl2/v3-4/INTRODUCTION.html" rel="nofollow">ACL2</a>.<br><br>The advantage is somewhat lost on those of us who don't make it a habit to write proofs about our programs' properties. :)
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240447380000#c6450008436153195192" title="comment permalink">
April 22, 2009 at 5:43 PM
</a>
<span class="item-control blog-admin pid-28511442">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6450008436153195192" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c792017042668909239">
<a name="c792017042668909239"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17265797060358625981" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-792017042668909239-17265797060358625981"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/17265797060358625981" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-792017042668909239">
<p>
I didn't care much one way or the other before I read this argument, but having done so, I'm convinced that leaving TRE out is the right thing to do.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240447680000#c792017042668909239" title="comment permalink">
April 22, 2009 at 5:48 PM
</a>
<span class="item-control blog-admin pid-1656493452">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=792017042668909239" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1020242520014238694">
<a name="c1020242520014238694"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/14835656643511775852" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1020242520014238694-14835656643511775852"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Yegor Bryukhov">

</a></span></div>
<a href="https://www.blogger.com/profile/14835656643511775852" rel="nofollow">Yegor Bryukhov</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1020242520014238694">
<p>
When you program in non-pure FPs like OCaml, where you have a choice, you get accustomed to avoiding side effects as much as you can. And last time I checked, it was generally accepted that side effects is a good source of errors. So every time you use side-effects you start to think about it as a suboptimal solution.<br>Now when you come to Java or Python you can't safely write side-effect free code anymore because of potential stack overflows. It hurts your sense of beauty because you feel that your code as suboptimal.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240448940000#c1020242520014238694" title="comment permalink">
April 22, 2009 at 6:09 PM
</a>
<span class="item-control blog-admin pid-1323076741">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1020242520014238694" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c964606200810132947">
<a name="c964606200810132947"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/08057528812732998703" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-964606200810132947-08057528812732998703"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Fred Blasdel">

</a></span></div>
<a href="https://www.blogger.com/profile/08057528812732998703" rel="nofollow">Fred Blasdel</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-964606200810132947">
<p>
Guido, why do you refer to it as TRE instead of the far more common TCO?<br><br>I was the commenter on yesterday's post that mentioned the relationship between nice stack traces and TCO — I didn't intend to say that TCO makes neat stack traces impossible, it just frustrates the process (more bookkeeping to do).<br><br>Haskell, for instance, has historically had piss-poor stack traces, but it has more to do with erasure / caching / inlining / graph-reduction than it does TCO.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240449120000#c964606200810132947" title="comment permalink">
April 22, 2009 at 6:12 PM
</a>
<span class="item-control blog-admin pid-651862087">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=964606200810132947" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c1726520516547497765">
<a name="c1726520516547497765"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1726520516547497765-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1726520516547497765">
<p>
On persistent vs. immutable: there may be some references in literature and even wikipedia, but most people use the term immutable for in-memory data structures that cannot be modified semantically (regardless of how shared versions are implemented), and persistency for techniques of writing stuff to disk and restoring it later.  I just read half a book on Haskell and AFAIR it uses these definitions too.<br><br>On TCO vs. TRE: Sorry, I just made it up.  The blog posts I reacted to were mostly talking about tail recursion, not TCO.  Wikipedia (again!) defines both tail call and tail recursion, but the latter section is twice as big. :-)  OTOH Google claims 10x more results for "tail call" than for "tail recursion".  I stand corrected.<br><br>On side effects being bad: Booooooooooring.  I did an undergraduate project on side effects in Pascal around 1977, and ABC (Python's predecessor) has copy/restore semantics to revert any side effects after a pure function returns (but it also has subroutines which can freely have side effects, but cannot be used in expressions).  I don't think the benefits of enforcing side-effect-free code (even optionally) make up for the many work-arounds you have to use to get anything done in the real world.  (Not even in Haskell, FWIW. :-)
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240451280000#c1726520516547497765" title="comment permalink">
April 22, 2009 at 6:48 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1726520516547497765" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7371680673836851872">
<a name="c7371680673836851872"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/14835656643511775852" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7371680673836851872-14835656643511775852"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Yegor Bryukhov">

</a></span></div>
<a href="https://www.blogger.com/profile/14835656643511775852" rel="nofollow">Yegor Bryukhov</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7371680673836851872">
<p>
Basically, Java and Python authors' message to people who like recursive style is "we don't like you, we don't care about you, we don't want you".
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240452000000#c7371680673836851872" title="comment permalink">
April 22, 2009 at 7:00 PM
</a>
<span class="item-control blog-admin pid-1323076741">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7371680673836851872" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c3273071613329244305">
<a name="c3273071613329244305"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/06464035878692252115" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3273071613329244305-06464035878692252115"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Watson Ladd">

</a></span></div>
<a href="https://www.blogger.com/profile/06464035878692252115" rel="nofollow">Watson Ladd</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3273071613329244305">
<p>
Tail Call Optimization has nothing to do with side effects. It's just away to avoid making useless calls. As for the impact on stack traces I don't see why knowing what functions called which is as useful as some people think it is. If you need to know that look at the code.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240453620000#c3273071613329244305" title="comment permalink">
April 22, 2009 at 7:27 PM
</a>
<span class="item-control blog-admin pid-361068324">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=3273071613329244305" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c2366610815663237066">
<a name="c2366610815663237066"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/12472103461437043685" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2366610815663237066-12472103461437043685"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Adam Olsen">

</a></span></div>
<a href="https://www.blogger.com/profile/12472103461437043685" rel="nofollow">Adam Olsen</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2366610815663237066">
<p>
In my mind, algorithmic complexity (space and time consumption, ie big-O) is critical to the semantics of an algorithm.  Having the language implementation alter your semantics based on external details should be considered a side-effect.<br><br>Tail calls in most languages are implicit optimizations, so they meet that definition of a side effect.  Using TCO to avoid side effects, when it is itself a side effect, is pointless.<br><br>Explicit tail calls are just fine under that definition.  They're a little more awkward than being implicit, but you can also design them to be less error prone.  The simplest I can think of at the moment is to have each function return (nextfunc, args, kwargs), and wrap it all in a single loop that continuously calls the nextfunc.<br><br>You will look silly if you do that when a normal loop will do.  This isn't a bad thing.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240454460000#c2366610815663237066" title="comment permalink">
April 22, 2009 at 7:41 PM
</a>
<span class="item-control blog-admin pid-1331620440">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2366610815663237066" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4099685617377837080">
<a name="c4099685617377837080"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/05992502488191304160" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4099685617377837080-05992502488191304160"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Mark Engelberg">

</a></span></div>
<a href="https://www.blogger.com/profile/05992502488191304160" rel="nofollow">Mark Engelberg</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4099685617377837080">
<p>
I prefer working with immutable (aka persistent) data structures as much as possible, and find them easier to reason about.  And when you're working with such data structures, that's when tail-call optimization and writing things in a more recursive style really shines.<br><br>But when working with Python's mutable lists and dicts, while loops are usually just fine.  <br><br>I've encountered a few times where I had mutually recursive functions in Python that would have benefited from tail-call optimization (TCO isn't merely for a function calling itself), but those situations seem rare.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240460820000#c4099685617377837080" title="comment permalink">
April 22, 2009 at 9:27 PM
</a>
<span class="item-control blog-admin pid-2120001709">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4099685617377837080" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4480140519635193622">
<a name="c4480140519635193622"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/16477373572593034581" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4480140519635193622-16477373572593034581"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//2.bp.blogspot.com/_LTLn7ZWG9a8/SwDBgmFdAfI/AAAAAAAAArQ/oI6fcleHFXo/S45-s35/Photo%2B1.jpg" alt="" title="Sean McQuillan">

<noscript><img src="//2.bp.blogspot.com/_LTLn7ZWG9a8/SwDBgmFdAfI/AAAAAAAAArQ/oI6fcleHFXo/S45-s35/Photo%2B1.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/16477373572593034581" rel="nofollow">Sean McQuillan</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4480140519635193622">
<p>
I will keep this short as this text box is small.<br><br>I believe you are looking at TCO the wrong way.  As a theoretical optimization, it has nothing to do with recursion and everything to do with calling semantics.  TCO can be applied in any situation where the function call does not have a continuation context surrounding it.  It really only has something to do with recursion in-so-much as we have no reason to shorten the call stack in any other situation.<br><br>Note, it is possible to rewrite *any* call to pass the continuation of the current expression context rather than create a stack frame, so tail recursion isn't *just* an optimization for those who force their algorithms to use tail recursion -- it can be applied to any recursion (doing so entails overhead that is likely not worth it -- but it's possible)<br><br>Check out chapter 7 and 8 of Essentials of Programming Languages for more discussion (warning: scheme -- devolves to math halfway through chapter 8).
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240466460000#c4480140519635193622" title="comment permalink">
April 22, 2009 at 11:01 PM
</a>
<span class="item-control blog-admin pid-669244550">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4480140519635193622" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6364415919061459526">
<a name="c6364415919061459526"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/18193908805797245856" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6364415919061459526-18193908805797245856"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="kay schluehr">

</a></span></div>
<a href="https://www.blogger.com/profile/18193908805797245856" rel="nofollow">kay schluehr</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6364415919061459526">
<p>
<i>Of course, none of this does anything to address my first three arguments. Is it really such a big deal to rewrite your function to use a loop?</i>If ceval.c is considered the premium style for writing programs I wonder why we came up with useful abstractions instead of creating just statemachines that manipulate the stack? <br><br>The latter is exactly the kind of rewrite that is necessary for all kinds of recursion and it is ugly, less readable and less compact.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240467240000#c6364415919061459526" title="comment permalink">
April 22, 2009 at 11:14 PM
</a>
<span class="item-control blog-admin pid-1000215703">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6364415919061459526" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c2917688359583417396">
<a name="c2917688359583417396"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2917688359583417396">
<p>
As far as terminology, I believe Tail Recursion is a subset of TCO, the case when calling the same function vs. optimizing any function call followed immediately by a return.<br><br>In any case, I quite like Python as it is, especially the changes in Python 3 (including nonlocal). Thanks for elaborating on why things are as they are.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240470780000#c2917688359583417396" title="comment permalink">
April 23, 2009 at 12:13 AM
</a>
<span class="item-control blog-admin pid-828233970">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2917688359583417396" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7128315939314068350">
<a name="c7128315939314068350"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17935063827932240235" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7128315939314068350-17935063827932240235"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Matt Williamson">

</a></span></div>
<a href="https://www.blogger.com/profile/17935063827932240235" rel="nofollow">Matt Williamson</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7128315939314068350">
<p>
As a daily user of the functional programming paradigm (&lt;3 Erlang), I agree with Guido on this one. Python strives to be simple to read and simple to debug and trying to make it act like a functional language would likely make both more difficult.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240482600000#c7128315939314068350" title="comment permalink">
April 23, 2009 at 3:30 AM
</a>
<span class="item-control blog-admin pid-505110733">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7128315939314068350" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7796284317787363276">
<a name="c7796284317787363276"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13618832348086828111" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7796284317787363276-13618832348086828111"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Kumar">

</a></span></div>
<a href="https://www.blogger.com/profile/13618832348086828111" rel="nofollow">Kumar</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7796284317787363276">
<p>
<i>TRE is incompatible with nice stack traces</i>So are loops. You don't get a stack trace of where all a loop has been - exactly the same information as a tail recursive call.<br><br><i>Once tail recursion elimination exists, developers will start writing code that depends on it,</i>Doesn't that mean developers find it comfortable to think about certain problems using recursion? Why deny them that intellectual tool?<br><br><i>Third, I don't believe in recursion as the basis of all programming.</i>Never heard that one. That would be like claiming that "mathematical induction" is the basis of all mathematics. <br><br>TCE is actually not that hard to implement **if you want to**.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240484700000#c7796284317787363276" title="comment permalink">
April 23, 2009 at 4:05 AM
</a>
<span class="item-control blog-admin pid-1384151799">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7796284317787363276" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6501906832188625746">
<a name="c6501906832188625746"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/06951118485569349457" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6501906832188625746-06951118485569349457"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Chas Emerick">

</a></span></div>
<a href="https://www.blogger.com/profile/06951118485569349457" rel="nofollow">Chas Emerick</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6501906832188625746">
<p>
'Persistent' is definitely the appropriate term, and it implies very important fundamental characteristics that are far more than simple implementation details (i.e. achieving immutability with amortized performance characteristics via lazy evaluation).<br><br>The same word can have different meanings in different contexts and communities.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240486140000#c6501906832188625746" title="comment permalink">
April 23, 2009 at 4:29 AM
</a>
<span class="item-control blog-admin pid-312844757">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6501906832188625746" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c3432171676236828821">
<a name="c3432171676236828821"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/06686065955078873361" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3432171676236828821-06686065955078873361"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="niv">

</a></span></div>
<a href="https://www.blogger.com/profile/06686065955078873361" rel="nofollow">niv</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3432171676236828821">
<p>
I personally if I think of a function as a tail recursive function, and I'm on a language without tail call optimization, I just make the optimization myself, rewriting the function just as the optimizer would do. I do this from time to time. That said, some of those optimizations require using goto, I'm thinking of two mutually recursive functions.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240491360000#c3432171676236828821" title="comment permalink">
April 23, 2009 at 5:56 AM
</a>
<span class="item-control blog-admin pid-2043563170">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=3432171676236828821" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1861661669962202523">
<a name="c1861661669962202523"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/16187415127098159771" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1861661669962202523-16187415127098159771"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Robert Virding">

</a></span></div>
<a href="https://www.blogger.com/profile/16187415127098159771" rel="nofollow">Robert Virding</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1861661669962202523">
<p>
I agree with Kumar here not having TCO because people might use them is a very strange argument to me. You are basically saying that you feel that using tail recursive algorithms is wrong so you won't add proper support for it. At least give the user a reasonable chance to find the best way of solving their problem.<br><br>It is easy to describe algorithms where not having TCO makes it more difficult to clearly implement an algorithm.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240493400000#c1861661669962202523" title="comment permalink">
April 23, 2009 at 6:30 AM
</a>
<span class="item-control blog-admin pid-1052887666">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1861661669962202523" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c3378478142238685234">
<a name="c3378478142238685234"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/11669552083414797272" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3378478142238685234-11669552083414797272"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/11669552083414797272" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3378478142238685234">
<p>
I completely sympathize with the argument "TCO's removal of stack frames will make debugging harder" but it seems then to avoid a possible optimization while also avoiding the real problem.  If TCO has value, then also invest in solving the debugging problem.  Frame the discussion as "If I have TCO and lose my stack frames, here are some ideas to improve the debugging experience"  Don't attempt to explain away TCO's intrinsic value and don't attempt to contrast good and bad programming styles based on whether you want to implement a feature.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240494720000#c3378478142238685234" title="comment permalink">
April 23, 2009 at 6:52 AM
</a>
<span class="item-control blog-admin pid-1504908165">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=3378478142238685234" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1271662026448841961">
<a name="c1271662026448841961"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/18396490224140022824" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1271662026448841961-18396490224140022824"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Hyakugei">

</a></span></div>
<a href="https://www.blogger.com/profile/18396490224140022824" rel="nofollow">Hyakugei</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1271662026448841961">
<p>
Warning: reverse troll ahead. <br><br>Hey Kumar, if implementing TCO is not so hard "if you want too", why don't you submit a patch with that functionality?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240495680000#c1271662026448841961" title="comment permalink">
April 23, 2009 at 7:08 AM
</a>
<span class="item-control blog-admin pid-1551600251">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1271662026448841961" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7788089683571632238">
<a name="c7788089683571632238"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03968844388108605008" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7788089683571632238-03968844388108605008"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="jto">

</a></span></div>
<a href="https://www.blogger.com/profile/03968844388108605008" rel="nofollow">jto</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7788089683571632238">
<p>
Kay, can you clarify your point?  Do you mean that implementing a language using a stack machine is bad?  To me, that suggests that CPython's interpreter should walk an expression tree instead of executing bytecode.  But it would be much slower that way.<br><br>Or maybe you mean that a stack machine can be less ugly, and just as fast, in a language that has closures and space-efficient tail calls.  There must be a way to test that hypothesis.<br><br>Anyway you chose an example that has little to do with typical real-world code in dynamic languages. Most Python programs are not fast Python interpreters!
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240497120000#c7788089683571632238" title="comment permalink">
April 23, 2009 at 7:32 AM
</a>
<span class="item-control blog-admin pid-811620896">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7788089683571632238" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c2883299215672730307">
<a name="c2883299215672730307"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12699845108719516586" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2883299215672730307-12699845108719516586"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9WYi1iUGTcqzZLPODcJF5AT8CdMwyAmhpgHEJNRxlPfojgbnteWAjuvjATUE5yMNz9UVFSaG1mOFJRdNzGmAd6BrSkoz_UhLy5h4OirlChqh1g35YCmkH4juJ_8jTQSQ/s45-c/jayson.jpg" alt="" title="Jayson Vantuyl">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9WYi1iUGTcqzZLPODcJF5AT8CdMwyAmhpgHEJNRxlPfojgbnteWAjuvjATUE5yMNz9UVFSaG1mOFJRdNzGmAd6BrSkoz_UhLy5h4OirlChqh1g35YCmkH4juJ_8jTQSQ/s45-c/jayson.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12699845108719516586" rel="nofollow">Jayson Vantuyl</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2883299215672730307">
<p>
I think there's a case for tail recursion in Python.  I have a practical proposal, on my blog <a href="http://souja.net/2009/04/on-tail-recursion-elimination.html" rel="nofollow">here</a>.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240500600000#c2883299215672730307" title="comment permalink">
April 23, 2009 at 8:30 AM
</a>
<span class="item-control blog-admin pid-1633553837">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2883299215672730307" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6715014959743524452">
<a name="c6715014959743524452"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/04107527216960668585" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6715014959743524452-04107527216960668585"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Peter Norvig">

</a></span></div>
<a href="https://www.blogger.com/profile/04107527216960668585" rel="nofollow">Peter Norvig</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6715014959743524452">
<p>
I'm sympathetic with the idea that a syntactic construction that treats each element of a list or sequence equally is, in most cases, easier to understand than a construct that treats the first element differently from the rest.  That is, I think<br><br>    [blah(x) for x in sequence]<br><br>is more readable than<br><br>    def recurse(seq):<br>        return [] if not seq else [blah(seq)] + recurse(seq[1:])<br><br>But I take issue with "Last, let's look at how we could implement tail recursion elimination. The first observation is that you can't do it at compile time."<br><br>As Sean said, if you think about it as compiling a call correctly, you come to the understanding that it doesn't matter if the call is recursive or not, you just need to make sure your compiler keeps track of whether the current expression is returning a value or not, and whether there is a surrounding context to return to.  EoPL covers this well, and I have  a very simple compiler that does this at compile time for a language, scheme, that has the same issues of dynamic rebinding of functions as Python: <br><br>http://norvig.com/paip/compile2.lisp<br>  <br>It is not hard at all -- the whole compiler is just a couple pages of code.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240515060000#c6715014959743524452" title="comment permalink">
April 23, 2009 at 12:31 PM
</a>
<span class="item-control blog-admin pid-55716068">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6715014959743524452" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c1012864111942422896">
<a name="c1012864111942422896"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1012864111942422896-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1012864111942422896">
<p>
Peter, did you read all the way through to the end of my section on implementation?  The "you cannot do it at compile time" argument based on dynamic rebinding was mostly aimed at some blog entries that (perhaps naively) tried to optimize self-tail-calls only.<br><br>Towards the end of my implementation section I show how you could do it for all tail calls, with a compile-time component (for determining appropriate contexts that are proper tail calls) and a run-time component.<br><br>I don't know about Scheme, but in Python you need a significant run-time component, not because of the rebinding problem, but because some things just cannot be called in this way (especially calls into extension modules, including system calls).  These things need "real" C stack frames.  The dynamic binding issue plays a role only because the compiler doesn't know what kind of thing is being called.<br><br>I end by rejecting this approach because it would suppress useful entries from tracebacks in many cases, not because it is unimplementable.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240520580000#c1012864111942422896" title="comment permalink">
April 23, 2009 at 2:03 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1012864111942422896" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4594148039229285159">
<a name="c4594148039229285159"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4594148039229285159">
<p>
first - Why couldn't the mechanism which formats stack traces be augmented with a recursion counter to provide identical stack traces.<br><br>second - stawman? if TRE has no visible impact on programs, there is no reason for it to be optional.<br><br>third - I don't follow how adding a feature (TRE) will shift programmer's style from using iterative to recursive.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240521180000#c4594148039229285159" title="comment permalink">
April 23, 2009 at 2:13 PM
</a>
<span class="item-control blog-admin pid-828233970">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4594148039229285159" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c210416193507052179">
<a name="c210416193507052179"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/04107527216960668585" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-210416193507052179-04107527216960668585"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Peter Norvig">

</a></span></div>
<a href="https://www.blogger.com/profile/04107527216960668585" rel="nofollow">Peter Norvig</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-210416193507052179">
<p>
Guido, yes I read all the way through, and saw that your "optimize all cases" was similar to what I was saying.  I objected to the statement "you can't do it at compile time" but I guess I missed the subtlety that that was someone else's blog talking, not you.<br><br>I think your analysis that you'd rather have informative stack traces than have "optimize all cases" is fine -- it comes down to which one would user's prefer and I'll trust your judgment on that.  You said that you need to do some runtime analysis to decide if you can do the tail call, because of extension module calls; I was thinking of handling that case by always doing the tail call, but having extension module functions wrapped in something that would set up the frame the way it needs to be.  Again, this is a tradeoff as to whether to do the work in the extension-wrapping object, or do analysis for every call.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240524900000#c210416193507052179" title="comment permalink">
April 23, 2009 at 3:15 PM
</a>
<span class="item-control blog-admin pid-55716068">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=210416193507052179" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8642786861670500844">
<a name="c8642786861670500844"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17197946799986500561" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8642786861670500844-17197946799986500561"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Josh">

</a></span></div>
<a href="https://www.blogger.com/profile/17197946799986500561" rel="nofollow">Josh</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8642786861670500844">
<p>
Guido, what's a stack trace look like for a recursive function rewritten with a loop? I can get a nice trace by sticking print statements into my loop, but I don't think that's what we're after. ;-)<br><br>Anyway, it seems to me that one could provide a very nice stack trace for calls that have been optimized with TRE. Instead of just replacing the tail call with a jump, how about recording the optimized-away call somewhere other than the stack and <i>then</i> jumping? <br><br>You'd trade a bit of space and time in exchange for infinite (within memory constraints) recursion and nice stack traces for TRE-optimized functions.<br><br>Does any of that make sense? I can elaborate further if need be, as I have a few naive ideas about how to deal with integrating the "real" and "fake" stacks.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240540920000#c8642786861670500844" title="comment permalink">
April 23, 2009 at 7:42 PM
</a>
<span class="item-control blog-admin pid-357556199">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=8642786861670500844" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5440457510265678591">
<a name="c5440457510265678591"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/12472103461437043685" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5440457510265678591-12472103461437043685"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Adam Olsen">

</a></span></div>
<a href="https://www.blogger.com/profile/12472103461437043685" rel="nofollow">Adam Olsen</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5440457510265678591">
<p>
@ozten: it changes the algorithmic complexity, which <b>is</b> a visible impact.  Otherwise you wouldn't care that it's not happening.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240541700000#c5440457510265678591" title="comment permalink">
April 23, 2009 at 7:55 PM
</a>
<span class="item-control blog-admin pid-1331620440">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5440457510265678591" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c7682932062226436133">
<a name="c7682932062226436133"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7682932062226436133-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7682932062226436133">
<p>
Josh, your design has already been implemented, in Stackless Python. However, it is not what the folks asking for TCO need -- you'd use O(N) space even for algorithms that only need O(1) space, and that would be unacceptable. It is also incompatible with my Second point -- not all Python implementations can easily adopt this approach, for example I expect it would not work in Jython and IronPython. (This incidentally explains why I have always resisted incorporating the Stackless Python design in Python.)
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240545660000#c7682932062226436133" title="comment permalink">
April 23, 2009 at 9:01 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7682932062226436133" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1947650556477318459">
<a name="c1947650556477318459"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/02436340179949427584" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1947650556477318459-02436340179949427584"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//2.bp.blogspot.com/_C1dsbORMxaw/SaG9h1PzvhI/AAAAAAAAAAM/aQs3alhy8W8/S45-s35/avatar.php%3Fgravatar_id%3Da51741ed3632a45027c2ea4340374b9d%26size%3D80%26rating%3DR" alt="" title="namekuseijin">

<noscript><img src="//2.bp.blogspot.com/_C1dsbORMxaw/SaG9h1PzvhI/AAAAAAAAAAM/aQs3alhy8W8/S45-s35/avatar.php%3Fgravatar_id%3Da51741ed3632a45027c2ea4340374b9d%26size%3D80%26rating%3DR" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/02436340179949427584" rel="nofollow">namekuseijin</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1947650556477318459">
<p>
The point of TRE is not in allowing one to write verbose loops -- If I want a simple loop in Scheme I just use "do", itself sugar for a TRE'd named let behind the scenes.  Rather, it is to make it possible to both write <b>any loops at all</b> in purely functional programming languages, but also to allow one to employ a <b>declarative approach to programming</b>, by decomposing the problem in many verifiable single steps declaring what the program does at each step rather than how.<br><br>BTW, implementing fibonacci in Python <br>doesn't gain much from stack trace inspection.  For instance, fib(1000) breaks the stack and prints long lines of:<br>...<br>  File "%lt;stdin%gt;", line 4, in f<br>  File "%lt;stdin%gt;", line 4, in f<br>RuntimeError: maximum recursion depth exceeded<br><br>none of which any useful. Sure, the imperative version has no such problems.  I too don't see the point of having efficient recursion in an imperative language.  Next people would call for multi-line, more useful lambdas than now! :P<br><br>Peace, Guido!  And thanks for Python.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240553520000#c1947650556477318459" title="comment permalink">
April 23, 2009 at 11:12 PM
</a>
<span class="item-control blog-admin pid-263735670">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1947650556477318459" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c456254909706271768">
<a name="c456254909706271768"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/02436340179949427584" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-456254909706271768-02436340179949427584"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//2.bp.blogspot.com/_C1dsbORMxaw/SaG9h1PzvhI/AAAAAAAAAAM/aQs3alhy8W8/S45-s35/avatar.php%3Fgravatar_id%3Da51741ed3632a45027c2ea4340374b9d%26size%3D80%26rating%3DR" alt="" title="namekuseijin">

<noscript><img src="//2.bp.blogspot.com/_C1dsbORMxaw/SaG9h1PzvhI/AAAAAAAAAAM/aQs3alhy8W8/S45-s35/avatar.php%3Fgravatar_id%3Da51741ed3632a45027c2ea4340374b9d%26size%3D80%26rating%3DR" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/02436340179949427584" rel="nofollow">namekuseijin</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-456254909706271768">
<p>
Damn you &lt;stdin&gt;! :P
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240553760000#c456254909706271768" title="comment permalink">
April 23, 2009 at 11:16 PM
</a>
<span class="item-control blog-admin pid-263735670">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=456254909706271768" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1329504946212642318">
<a name="c1329504946212642318"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02649532819140192045" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1329504946212642318-02649532819140192045"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Jason Baker">

</a></span></div>
<a href="https://www.blogger.com/profile/02649532819140192045" rel="nofollow">Jason Baker</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1329504946212642318">
<p>
Just out of sheer curiosity, is there any reason why you could not do something similar to clojure's loops?  I suppose the syntax could look something like this:<br><br><br>def some_func():<br>    loop(x=0):<br>        if x &lt;= 10:<br>            x += 1<br>            recur(x, y)<br><br>That would roughly translate into something like this:<br><br>def some_func():<br>    def _loop(x):<br>        if x &lt;= 10:<br>            x += 1<br>            _loop(x, y)<br><br>    _loop(0)<br><br>Granted, this is a contrived case.  But sometimes I find it easier to think of problems recursively rather than iteratively.  And the second version just seems ugly to me.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240617600000#c1329504946212642318" title="comment permalink">
April 24, 2009 at 5:00 PM
</a>
<span class="item-control blog-admin pid-690412683">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1329504946212642318" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c834285862713349362">
<a name="c834285862713349362"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/18193908805797245856" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-834285862713349362-18193908805797245856"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="kay schluehr">

</a></span></div>
<a href="https://www.blogger.com/profile/18193908805797245856" rel="nofollow">kay schluehr</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-834285862713349362">
<p>
@jto<br><br>Writing a virtual machine using opcodes ( states ) and a stack is just fine. Writing applications in that style is simply not adequate and a step backwards.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240727280000#c834285862713349362" title="comment permalink">
April 25, 2009 at 11:28 PM
</a>
<span class="item-control blog-admin pid-1000215703">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=834285862713349362" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6566439482828524946">
<a name="c6566439482828524946"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/00794986337274390041" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6566439482828524946-00794986337274390041"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="EM">

</a></span></div>
<a href="https://www.blogger.com/profile/00794986337274390041" rel="nofollow">EM</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6566439482828524946">
<span class="deleted-comment">This comment has been removed by the author.</span>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240790820000#c6566439482828524946" title="comment permalink">
April 26, 2009 at 5:07 PM
</a>
<span class="item-control blog-admin ">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6566439482828524946" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1359724217100091528">
<a name="c1359724217100091528"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/15657776321096054721" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1359724217100091528-15657776321096054721"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="brad dunbar">

</a></span></div>
<a href="https://www.blogger.com/profile/15657776321096054721" rel="nofollow">brad dunbar</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1359724217100091528">
<p>
Not having a lot of experience or knowledge of tail recursion, I am not in any position to argue about using it or not using it.  I love python the way it is, and I trust you're making the right decisions.<br><br>However, a point that does bother me slightly is your general preference for loops in place of recursion.  I feel like recursion is closer to the way my mind reasons about problems in many cases.  And since programming languages are just a way of translating my thoughts for the cpu, it seems like a handy tool.<br><br>In any case, I would like to hear more on your preferences regarding recursion vs. loops and am hoping for another post exploring this.<br><br>I'm loving the posts here and at History of Python.  Keep them up.  :)
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240795260000#c1359724217100091528" title="comment permalink">
April 26, 2009 at 6:21 PM
</a>
<span class="item-control blog-admin pid-244349273">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1359724217100091528" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c2837808740351463132">
<a name="c2837808740351463132"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10658555678500278995" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2837808740351463132-10658555678500278995"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Aaron">

</a></span></div>
<a href="https://www.blogger.com/profile/10658555678500278995" rel="nofollow">Aaron</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2837808740351463132">
<p>
&gt;&gt; The call to g(5) invokes the <br>&gt;&gt; earlier f, but the "recursive" <br>&gt;&gt; call no longer recurses!<br><br>This is, of course, why scheme doesn't generally do tail call elimination this way either.<br><br>It is interesting in that it can be done without any modification to the byte code interpreter, but so can trampoline loops like is employed in Clojure.<br><br>But why the avoidance of tampering with the byte code interpreter?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240850580000#c2837808740351463132" title="comment permalink">
April 27, 2009 at 9:43 AM
</a>
<span class="item-control blog-admin pid-891313175">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2837808740351463132" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8956549754909773441">
<a name="c8956549754909773441"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/14063105144178880818" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8956549754909773441-14063105144178880818"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxoxVWxB7QkU_9NTpdYMcwlwebA6KsPfFP-FBmGIgkUPuqzK04FJZ-Rv3EhzXNoVSwOTW67YLYlIoDyDzf6XGqC4248b08J4TXvmHuAuwscoxtG7f7VghuHD6RmAajQw/s45-c/fare-small.jpg" alt="" title="Faré">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxoxVWxB7QkU_9NTpdYMcwlwebA6KsPfFP-FBmGIgkUPuqzK04FJZ-Rv3EhzXNoVSwOTW67YLYlIoDyDzf6XGqC4248b08J4TXvmHuAuwscoxtG7f7VghuHD6RmAajQw/s45-c/fare-small.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/14063105144178880818" rel="nofollow">Faré</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8956549754909773441">
<p>
1- your proposed alternative to tail-calls, loops, are WORSE wrt debug info. Tail-calls are trivially transformed into calls w/ debugging info; equivalent loops not so much. http://fare.livejournal.com/142410.html<br><br>2- PTC (proper tail calls) are not a mere optimization. They essentially change the space complexity of programs, and they allow code to be decentralized where loops require big spaghetti centralization.<br><br>3- lisp-style lists and recursion are completely different concepts. One does not imply the other. Tail-calls allow to build iterators on arbitrary data-structures in a modular and compositional way. (Felleisen has some nice papers on that.)<br><br>4- any Turing tar-pit is able to emulate proper tail-call through one extra level of indirection. But then in addition to the run-time cost, you pay the programmer-time cost of having to enforce convention and not being able to freely interoperate with code that doesn't use the convention.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1240873740000#c8956549754909773441" title="comment permalink">
April 27, 2009 at 4:09 PM
</a>
<span class="item-control blog-admin pid-1214454998">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=8956549754909773441" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8380463050583856979">
<a name="c8380463050583856979"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/15167966852380794888" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8380463050583856979-15167966852380794888"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMnTr79fH6OE8O96A4lQPQhlfOB0PlBM4g3PRuNWV3nyVEnLZrJRbI3LTXJW38XqbDiI1gF_NCoS2AR4GOXflkcUpINFeHMGgv-nUBFvR3-d25bqdJ7rSenv-Ht9lf2g/s45-c/me0.jpg" alt="" title="nicolaslara">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMnTr79fH6OE8O96A4lQPQhlfOB0PlBM4g3PRuNWV3nyVEnLZrJRbI3LTXJW38XqbDiI1gF_NCoS2AR4GOXflkcUpINFeHMGgv-nUBFvR3-d25bqdJ7rSenv-Ht9lf2g/s45-c/me0.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/15167966852380794888" rel="nofollow">nicolaslara</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8380463050583856979">
<p>
"<i>Is it really such a big deal to rewrite your function to use a loop? </i>"<br><br>It is not. But I'd have to say it would definitely affect readability in the case of self recursive functions. <br><br>An interesting way to address this would be to use coroutines and instead of calling the function recursively one could send the arguments to the function. But then again, coroutines cant send values to themselves AFAIK. <br>If they did, one could use a pattern like this:<br><br>def tail_rec_func():<br>    args, kwargs = (yield)<br>    ...<br>    send(new_args, new_kwargs)<br><br>The good thing about this is that it is explicit. It would be a fairly advanced trick and people would know what to expect from it (i.e.: a non-trivial stack trace).<br><br>Another way would be through new syntax (something different than return) for making a tail call (I know adding syntax is not to be taken lightly, please don't set me on fire). Someone mentioned Clojure which has similar syntax.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1241030520000#c8380463050583856979" title="comment permalink">
April 29, 2009 at 11:42 AM
</a>
<span class="item-control blog-admin pid-42623231">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=8380463050583856979" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7002734217864957351">
<a name="c7002734217864957351"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12699845108719516586" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7002734217864957351-12699845108719516586"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9WYi1iUGTcqzZLPODcJF5AT8CdMwyAmhpgHEJNRxlPfojgbnteWAjuvjATUE5yMNz9UVFSaG1mOFJRdNzGmAd6BrSkoz_UhLy5h4OirlChqh1g35YCmkH4juJ_8jTQSQ/s45-c/jayson.jpg" alt="" title="Jayson Vantuyl">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9WYi1iUGTcqzZLPODcJF5AT8CdMwyAmhpgHEJNRxlPfojgbnteWAjuvjATUE5yMNz9UVFSaG1mOFJRdNzGmAd6BrSkoz_UhLy5h4OirlChqh1g35YCmkH4juJ_8jTQSQ/s45-c/jayson.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12699845108719516586" rel="nofollow">Jayson Vantuyl</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7002734217864957351">
<p>
I actually find the best use case to be when you have functions that aren't just self-recursive.  If you have two or three functions that recurse between each other, suddenly you have an unbounded stack problem.<br><br>I would love a syntax change.  I had previously proposed "recurse", but I like send even better.  If we do add syntax, I think that we should add an API.  Callables should support a __send__ method that does optimized tail recursion.<br><br>The advantage of this is that we can write classes that can support __send__ and use them in concert with things like Threading to build much better actor systems.<br><br>What would be REALLY cool would be if generators used this API as well (since X.send(blah) is not quite as nice as send X(blah) ).  Although, there is the problem that we are clouding the meaning what would otherwise looks like a normal function call, so it probably would be too confusing.<br><br>On the plus side, it would be very cool to have a subclass of threading.Thread that wraps a generator and will yield incoming "send" messages into generator, etc.<br><br>In the end, I'm pretty sure that to get a really good actor paradigm, we need to go further than just generators, probably with a whole new construct.  Lots of things that work great in an actor model are the kind of thing that having this kind of feature is really good for.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1241033280000#c7002734217864957351" title="comment permalink">
April 29, 2009 at 12:28 PM
</a>
<span class="item-control blog-admin pid-1633553837">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7002734217864957351" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7579752381859820098">
<a name="c7579752381859820098"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17103481765366134475" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7579752381859820098-17103481765366134475"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="FutureNerd">

</a></span></div>
<a href="https://www.blogger.com/profile/17103481765366134475" rel="nofollow">FutureNerd</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7579752381859820098">
<p>
Why not make a cleaned-up tail call an explicit variation on the return statement?  Then you get the stack trace you asked for.  And like what Kumar says, it's also the stack trace you probably would want in that situation.<br><br>I thought I read that Python was intended for both beginners and math types.  I like Python because both those sides of myself like it.<br><br>The application that led me eventually to here, was a generator for a directory tree.  It just seems wrong for each [[great...] grand] parent to loop over each [[great...] grand] child's results and re- [re-...] yield them.<br><br>I googled about that and found a <a href="http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg03165.html" rel="nofollow">discussion </a>that said a tail-recursive "yield_all" would be very hard in Python.<br><br>Then I started trying to write an iterator subclass that does explicit continuation passing.  My first try ended up having its space savings depend on a tail-recursive method call.  Hmm, does that work in Python?  Googling that question got me here.  (No it doesn't work, back to the drawing board.)<br><br>Meanwhile, Guido, you wondered what possible use a tail- recursive method call could have.  Hope this seems plausible.  Imagine trees with &gt;1000- deep chains of only children, but also bushy parts.<br><br>There are ways to do TCO in pure stack languages.  What it does to the readability of your code and how it integrates with things like external C functions, are different matters.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1243822863090#c7579752381859820098" title="comment permalink">
May 31, 2009 at 7:21 PM
</a>
<span class="item-control blog-admin pid-97021227">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7579752381859820098" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1837774163860884253">
<a name="c1837774163860884253"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10500835143321767281" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1837774163860884253-10500835143321767281"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Beni Cherniavsky-Paskin">

</a></span></div>
<a href="https://www.blogger.com/profile/10500835143321767281" rel="nofollow">Beni Cherniavsky-Paskin</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1837774163860884253">
<p>
Not Python-related, I just figured the perfect example of tail call for the layman, and had to share it with somebody:<br><br>You know how you have a browser tab whose only interesting content is 5 links, so you middle-click 4 of them to new tabs but open the 5th link in the original tab?  That's tail call!<br><br>[Strictly speaking, that's imprecise because you have history (=stack) on each tab.  So it's more like "tail spawn" for threads or processes: it's like some launcher shell scripts whose last line is "exec" (*).  But coding-wise, in the abstraction level of a shell script, it looks exactly like tail call - because "calls" in the the shell are asynchronous.<br><br>(*) ironically, the reason launcher scripts use "exec" is precisely that they *want* to drop the "stack frame".  Leaving the shell alive would just clatter the process table with no real benefit.]
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1244050457505#c1837774163860884253" title="comment permalink">
June 3, 2009 at 10:34 AM
</a>
<span class="item-control blog-admin pid-1026324778">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1837774163860884253" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c173816948369408612">
<a name="c173816948369408612"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/14317139024673582070" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-173816948369408612-14317139024673582070"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjpH8sbUSZ3-3LG7Kb-eDv7rV0xUlA4ycWQ79ssTSY9mKidcnLlS0s5QFl2XvQMHnTE0_d0Q8eCQ2HKmCQT8iJkN4gwAWkmZxs_YgkdI54pWM8-jzgToKOvs1-kssZfzw/s45-c/1209437506567.jpg" alt="" title="david pasquinelli">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjpH8sbUSZ3-3LG7Kb-eDv7rV0xUlA4ycWQ79ssTSY9mKidcnLlS0s5QFl2XvQMHnTE0_d0Q8eCQ2HKmCQT8iJkN4gwAWkmZxs_YgkdI54pWM8-jzgToKOvs1-kssZfzw/s45-c/1209437506567.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/14317139024673582070" rel="nofollow">david pasquinelli</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-173816948369408612">
<p>
@Adam Olsen<br>"it changes the algorithmic complexity..."<br><br>how does tco change algorithmic complexity?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1305522343603#c173816948369408612" title="comment permalink">
May 15, 2011 at 10:05 PM
</a>
<span class="item-control blog-admin pid-93710401">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=173816948369408612" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c3043252533374866185">
<a name="c3043252533374866185"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02453650186787649553" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3043252533374866185-02453650186787649553"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Anirvan">

</a></span></div>
<a href="https://www.blogger.com/profile/02453650186787649553" rel="nofollow">Anirvan</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3043252533374866185">
<p>
As a newcomer to Python, Guido's example with function name rebinding is a bit scary to me...<br><br>How can I refer to a function from within the body of that function without using its name to prevent this? I haven't been able to find an equivalent of "self" for functions.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1325534300180#c3043252533374866185" title="comment permalink">
January 2, 2012 at 11:58 AM
</a>
<span class="item-control blog-admin pid-1560583406">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=3043252533374866185" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c6185951465738719913">
<a name="c6185951465738719913"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13319424865794352000" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6185951465738719913-13319424865794352000"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Chris Drost">

</a></span></div>
<a href="https://www.blogger.com/profile/13319424865794352000" rel="nofollow">Chris Drost</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6185951465738719913">
<p>
Anirvan: sorry that I am late here. Its true that python does not have private function naming the way JavaScript does, and therefore you would have to write something like (replace ` with two spaces):<br><br>def make_fact():<br>``def fact(n): <br>````return 1 if n &lt; 2 else n * fact(n - 1)<br>``return fact <br>fact = make_fact()<br><br>It is also true that unfortunately Python, like JavaScript, doesn't support macros (code that writes code), so you cannot wrap that whole beast in a simple decorator. It's a pity, it would be nice to be able to at the very least say something like:<br><br>@!self_scoped<br>def fact(n): <br>``return 1 if n &lt; 2 else n * fact(n - 1)<br><br>...with `@!` being a sort of "macro decorator" so that you do not have to worry if someone else redefines fact. On the other hand, there is a Python principle that "we're all adults here, if I redefine 'fact' within your code that's only really going to affect me," etc. Still, you can see where it lacks power.<br><br>Beni: I am even later in responding to you, but I will make this point anyways. The right way to think about tail calls is 'iterorecursively'. You write an iterative algorithm by declaring the variables as arguments and recursing rather than looping. So you might have written an iterative factorial as:<br><br>def fact(n):<br>``product = 1<br>``for i in range(1, n + 1):<br>````product *= i<br>``return product<br><br>To write this iterorecursively you could instead write:<br><br>def fact(n, product=1, i=1):<br>``return product if i &gt; n else fact(n, product * i, i + 1)<br><br>That is a tail-recursive function. Many lispers get so used to them that they instead decrement on `n` to save a variable:<br><br>def fact(n, product=1):<br>``return product if n &lt;= 0 else fact(n - 1, product * n)<br><br>The point is, GvR's advice here is mostly blustery crap. If I use @!tail_recursive (again with these fake macros that don't exist!), then the very least you can do is assume the @!self_scoped macro, too: whenever I refer to `name` it means the present function. The fact that the macro depends on this doesn't matter, because We Are All Adults Here, and if we say "I'm doing X" then we should be content to say "oh, look, he's doing X." The other problem that GvR highlights -- that sometimes it's syntactically incorrect to describe something as @!tail_recursive -- is probably the domain of throwing a ValueError. However, it <i>is</i> suggestive of the fact that we shouldn't even have to discuss this sort of thing, and tail call optimization can just happen for free on compilation. If you look at the Abelson-Sussman lectures here:<br><br>http://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/<br><br>they discuss compiler design in Scheme, and the result is actually absurdly simple: there is a tiny, almost trivial difference where you realize that it doesn't matter which order two lines of compiler output are, so you put them in the opposite order that you might have expected, and then you don't leave behind any stack when the thing actually is tail-recursive, but you still gracefully handle the case where it is not (since you haven't lost generality). <br><br>So at least in principle Guido is wrong. Scheme proves that you don't need a special syntax to provide tail-call optimization, and I'm really not sure that things like debuggability fundamentally <i>can't</i> be done in this context.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1331636954032#c6185951465738719913" title="comment permalink">
March 13, 2012 at 4:09 AM
</a>
<span class="item-control blog-admin pid-332729614">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=6185951465738719913" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c7412446458032995020">
<a name="c7412446458032995020"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17756588602580974678" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7412446458032995020-17756588602580974678"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Doug Blank">

</a></span></div>
<a href="https://www.blogger.com/profile/17756588602580974678" rel="nofollow">Doug Blank</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-7412446458032995020">
<p>
You can absolutely have Python-like stack traces in a properly tail-call handled language. Take:<br><br>(define loop <br>````(lambda (n)<br>```````(if (= n 0)<br>```````````(no-such-function)<br>```````````(loop (- n 1)))))<br>(loop 10)<br><br>Produces:<br><br>Traceback (most recent call last):<br>  File "/home/dblank/gluezilla/Untitled.ss", line 7, col 1, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 5, col 13, calling 'loop'<br>  File "/home/dblank/gluezilla/Untitled.ss", line 4, col 14<br>RunTimeError: unbound variable 'no-such-function'<br><br>in Calico Scheme.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1360605153838#c7412446458032995020" title="comment permalink">
February 11, 2013 at 9:52 AM
</a>
<span class="item-control blog-admin pid-1091796371">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=7412446458032995020" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4220415990924676991">
<a name="c4220415990924676991"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13682155400650729376" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4220415990924676991-13682155400650729376"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/13682155400650729376" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4220415990924676991">
<p>
Definitely seems to be complicated/impossible to determine a function is tail recursion 'compliant' statically in python, however, what if it were an 'opt in' feature that uses a different 'return' keyword?<br><br>  def f(n):<br>    if n &gt; 0:<br>      tailcall f(n - 1)<br>    return 0<br><br>Where tailcall would have special semantics similar to return but with the side effect of 'Tail Recursion'.  You could easily use return here, but in the case where n is very large, you could replace the return with tailcall to 'fix the bug' vs rewriting the entire function to be iteration vs recursion.  Arguably, the final effect of return and tailcall is the same (a value is returned), but the process in which you get there is significantly different.  One results in a deep stack that possibly blows up vs the other results in a single frame that is harder to debug (but I think that could be mitigated, for instance: a tailcall frame/function could be specially marked in the stack trace).<br><br>Arguably, it would add yet another 'return-like' keyword (where yield and return are similar), but perhaps its simple and un-intrusive enough to benefit those that would like to use tail recursion.<br><br>Obviously, it's not as glamorous as being able to optimize 'return' to tail recursion automagically, but it does allow those familiar with its semantics to opt into its use.  Other languages could easily implement it and it would not affect already written code.<br><br>Just had the thought, not sure if it has already been discussed.  I know python does not attempt to be a functional language, but this would certainly open it up to more of a possibility.<br><br>Thanks for your time.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1373583516341#c4220415990924676991" title="comment permalink">
July 11, 2013 at 3:58 PM
</a>
<span class="item-control blog-admin pid-656725310">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4220415990924676991" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c1270045861807546302">
<a name="c1270045861807546302"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12821714508588242516" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1270045861807546302-12821714508588242516"><img src="./Neopythonic_ Tail Recursion Elimination_files/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" alt="" title="Guido van Rossum">

<noscript><img src="//blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCLa1yGwmPzpl0byaqgJqq_HuE3fURSs-RMJstE-2n3Ld4FVh7JcWK8kE6KE3To94J7IiB2VxppOPsxeOsHwBOQJRwsxJrlwCzaC1n45ruBsSAzwfZEQkm3FBPORFmog/s45-c/IMG_2192.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12821714508588242516" rel="nofollow">Guido van Rossum</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1270045861807546302">
<p>
Dan: your proposal has the redeeming quality of clearly being a language feature rather than a possible optimization.  I don't really expect there to be enough demand to actually add this to the language though.  Maybe you can use macropy to play around with the idea though?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1373584275783#c1270045861807546302" title="comment permalink">
July 11, 2013 at 4:11 PM
</a>
<span class="item-control blog-admin pid-1774424698">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1270045861807546302" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1825453009562769088">
<a name="c1825453009562769088"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/07136457974650632281" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1825453009562769088-07136457974650632281"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/07136457974650632281" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1825453009562769088">
<p>
I like Dan's proposal very much. I would make use of the new language feature immediately!
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1374045030816#c1825453009562769088" title="comment permalink">
July 17, 2013 at 12:10 AM
</a>
<span class="item-control blog-admin pid-1156389807">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=1825453009562769088" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c2800944980526168133">
<a name="c2800944980526168133"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/01255171563364035215" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2800944980526168133-01255171563364035215"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="水逝云飞">

</a></span></div>
<a href="https://www.blogger.com/profile/01255171563364035215" rel="nofollow">水逝云飞</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-2800944980526168133">
<p>
TRE is explicitly enabled by the special return syntax(for example, return from ...).<br><br>with the new "return from", current frames is reused, and traceback is replaced by the further call. <br><br>using "return from" to explicitly release current frame provide more efficient gc (local variables die as soon as they were useless) and more clearly debug information (traceback of some wrapper function is totally useless, such as socket.socket.__getattr__).<br><br><br><br>
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1381417178779#c2800944980526168133" title="comment permalink">
October 10, 2013 at 7:59 AM
</a>
<span class="item-control blog-admin pid-1746023669">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=2800944980526168133" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5725169967078733780">
<a name="c5725169967078733780"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/01255171563364035215" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5725169967078733780-01255171563364035215"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="水逝云飞">

</a></span></div>
<a href="https://www.blogger.com/profile/01255171563364035215" rel="nofollow">水逝云飞</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5725169967078733780">
<p>
just use a new syntax(for example, return from ...) for explicitly reuse current frame, and everything done.<br><br>explicitly release current frame on next function call could provide more efficient gc(local variables die as soon as they were useless) and more clean debug information(traceback of many wrapper function is totally useless, such as socket.socket.__getattr__).
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1381417512433#c5725169967078733780" title="comment permalink">
October 10, 2013 at 8:05 AM
</a>
<span class="item-control blog-admin pid-1746023669">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5725169967078733780" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5121966473534892142">
<a name="c5121966473534892142"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/06449260589817980007" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5121966473534892142-06449260589817980007"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="ipatrol">

</a></span></div>
<a href="https://www.blogger.com/profile/06449260589817980007" rel="nofollow">ipatrol</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5121966473534892142">
<p>
My thoughts are to perhaps make TCO an opt-in feature via -O/-OO or something analogous. In that case, it would be the responsibility of the invoker of the interpreter to ensure that the program plays nice and doesn't try any bizarre tricks, just like right now one needs to make sure under -OO that docstrings aren't being used (I'm looking at you, ply). Also, under optimize mode, the neatness of stack traces is presumably irrelevant because a known side effect of optimization is the removal of debugging features.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1396369131734#c5121966473534892142" title="comment permalink">
April 1, 2014 at 9:18 AM
</a>
<span class="item-control blog-admin pid-1084564752">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5121966473534892142" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c725474593817240606">
<a name="c725474593817240606"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/16449390422848764481" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-725474593817240606-16449390422848764481"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="ArneBab">

</a></span></div>
<a href="https://www.blogger.com/profile/16449390422848764481" rel="nofollow">ArneBab</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-725474593817240606">
<p>
I’ve grown to like tail recursion even though I “grew up” with Python (it was the first language I really liked). My reasons are that I found recursive functions easier to debug than loops, because the variables available at the beginning of each “iteration” are always clear. I have an example of this on my site: http://draketo.de/light/english/recursion-wins<br><br>Also it is already possible to get nice stack-traces with GCC by requiring compilation with -Og -foptimize-sibling-calls. For details see http://draketo.de/light/english/free-software/tco-debug
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1416346124375#c725474593817240606" title="comment permalink">
November 18, 2014 at 1:28 PM
</a>
<span class="item-control blog-admin pid-1893015293">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=725474593817240606" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4003483562556477705">
<a name="c4003483562556477705"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02898381097003622186" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4003483562556477705-02898381097003622186"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/02898381097003622186" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4003483562556477705">
<p>
In a project we are working on, we are moving toward a more and more functional style, because it is much easier to reason about and this "feature" made use decide to move away from python. In python 3 functional programming style is even more discouraged. <br><br>I don't understand this decision. The debugging issue is a non issue, so what you lose some frames? It is not, that they have any interesting information in it. (f called with (3), f called with 2). And ehm, if you are really concerned about loosing information, it could be added as an  optimization option to python.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1436021710359#c4003483562556477705" title="comment permalink">
July 4, 2015 at 7:55 AM
</a>
<span class="item-control blog-admin pid-2035708308">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=4003483562556477705" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5827684277641051347">
<a name="c5827684277641051347"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02898381097003622186" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5827684277641051347-02898381097003622186"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/02898381097003622186" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5827684277641051347">
<p>
It is much cleaner to work with combinators than with explicit recursion. It shows the intent of the programmer. 
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1436021771446#c5827684277641051347" title="comment permalink">
July 4, 2015 at 7:56 AM
</a>
<span class="item-control blog-admin pid-2035708308">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=5827684277641051347" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8643605270801672739">
<a name="c8643605270801672739"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02021656461185309628" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8643605270801672739-02021656461185309628"><img src="./Neopythonic_ Tail Recursion Elimination_files/blogger_logo_round_35.png" width="35" height="35" alt="" title="Lucas Malor">

</a></span></div>
<a href="https://www.blogger.com/profile/02021656461185309628" rel="nofollow">Lucas Malor</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8643605270801672739">
<p>
<i>&lt;&gt;</i><br><br>Well, the same happens with asyncio. You can't get a nice stack trace if you don't enable asyncio debugging mode.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html?showComment=1456663618600#c8643605270801672739" title="comment permalink">
February 28, 2016 at 4:46 AM
</a>
<span class="item-control blog-admin pid-1604756028">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=4195135246107166251&amp;postID=8643605270801672739" title="Delete Comment">
<img src="./Neopythonic_ Tail Recursion Elimination_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class="comment-footer">
<a href="https://www.blogger.com/comment.g?blogID=4195135246107166251&amp;postID=5401046714209368399" onclick="">Post a Comment</a>
</p>
</div>
</div>

        </div></div>
      
</div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="https://neopythonic.blogspot.com/2009/04/people-who-annoy-me.html" id="Blog1_blog-pager-newer-link" title="Newer Post">Newer Post</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="https://neopythonic.blogspot.com/2009/04/italia-here-i-come.html" id="Blog1_blog-pager-older-link" title="Older Post">Older Post</a>
</span>
<a class="home-link" href="https://neopythonic.blogspot.com/">Home</a>
</div>
<div class="clear"></div>
<div class="post-feeds">
<div class="feed-links">
Subscribe to:
<a class="feed-link" href="https://neopythonic.blogspot.com/feeds/5401046714209368399/comments/default" target="_blank" type="application/atom+xml">Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
</div>
<div class="column-left-outer">
<div class="column-left-inner">
<aside>
</aside>
</div>
</div>
<div class="column-right-outer">
<div class="column-right-inner">
<aside>
<div class="sidebar section" id="sidebar-right-1"><div class="widget Profile" data-version="1" id="Profile1">
<h2>About Me</h2>
<div class="widget-content">
<a href="https://www.blogger.com/profile/12821714508588242516"><img alt="My photo" class="profile-img" height="80" src="./Neopythonic_ Tail Recursion Elimination_files/IMG_2192.jpg" width="53"></a>
<dl class="profile-datablock">
<dt class="profile-data">
<a class="profile-name-link g-profile" href="https://www.blogger.com/profile/12821714508588242516" rel="author" style="background-image: url(//www.blogger.com/img/logo-16.png);">
Guido van Rossum
</a>
</dt>
<dd class="profile-textblock">Python's BDFL</dd>
</dl>
<a class="profile-link" href="https://www.blogger.com/profile/12821714508588242516" rel="author">View my complete profile</a>
<div class="clear"></div>
</div>
</div><div class="widget BlogArchive" data-version="1" id="BlogArchive1">
<h2>Blog Archive</h2>
<div class="widget-content">
<div id="ArchiveList">
<div id="BlogArchive1_ArchiveList">
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2022/">
2022
</a>
<span class="post-count" dir="ltr">(2)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2022/10/">
October
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2022/02/">
February
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2019/">
2019
</a>
<span class="post-count" dir="ltr">(1)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2019/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2018/">
2018
</a>
<span class="post-count" dir="ltr">(1)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2018/11/">
November
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2016/">
2016
</a>
<span class="post-count" dir="ltr">(5)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2016/07/">
July
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2016/05/">
May
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2016/04/">
April
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2013/">
2013
</a>
<span class="post-count" dir="ltr">(2)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2013/10/">
October
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2011/">
2011
</a>
<span class="post-count" dir="ltr">(5)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2011/08/">
August
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2011/07/">
July
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2011/06/">
June
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2011/01/">
January
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/">
2009
</a>
<span class="post-count" dir="ltr">(16)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/12/">
December
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/11/">
November
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/09/">
September
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/07/">
July
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/06/">
June
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/05/">
May
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/04/">
April
</a>
<span class="post-count" dir="ltr">(4)</span>
<ul class="posts">
<li><a href="https://neopythonic.blogspot.com/2009/04/final-words-on-tail-calls.html">Final Words on Tail Calls</a></li>
<li><a href="https://neopythonic.blogspot.com/2009/04/people-who-annoy-me.html">People Who Annoy Me</a></li>
<li><a href="https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html">Tail Recursion Elimination</a></li>
<li><a href="https://neopythonic.blogspot.com/2009/04/italia-here-i-come.html">Italia Here I Come!</a></li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2009/01/">
January
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2008/">
2008
</a>
<span class="post-count" dir="ltr">(14)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2008/12/">
December
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2008/11/">
November
</a>
<span class="post-count" dir="ltr">(5)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="https://neopythonic.blogspot.com/2008/10/">
October
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div>
</div><div class="widget Followers" data-version="1" id="Followers1">
<h2 class="title">Followers</h2>
<div class="widget-content">
<div id="Followers1-wrapper">
<div style="margin-right:2px;">
<div><script type="text/javascript" src="./Neopythonic_ Tail Recursion Elimination_files/platform.js.Без названия" gapi_processed="true"></script>
<div id="followers-iframe-container"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="" tabindex="0" vspace="0" width="100%" id="I0_1701957708772" name="I0_1701957708772" src="./Neopythonic_ Tail Recursion Elimination_files/followers.html"></iframe></div>
<script type="text/javascript">
    window.followersIframe = null;
    function followersIframeOpen(url) {
      gapi.load("gapi.iframes", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          window.followersIframe = gapi.iframes.getContext().openChild({
            url: url,
            where: document.getElementById("followers-iframe-container"),
            messageHandlersFilter: gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER,
            messageHandlers: {
              '_ready': function(obj) {
                window.followersIframe.getIframeEl().height = obj.height;
              },
              'reset': function() {
                window.followersIframe.close();
                followersIframeOpen("https://www.blogger.com/followers.g?blogID\x3d4195135246107166251\x26colors\x3dCgt0cmFuc3BhcmVudBILdHJhbnNwYXJlbnQaByM2NjY2NjYiByMyMjg4YmIqByNmZmZmZmYyByMwMDAwMDA6ByM2NjY2NjZCByMyMjg4YmJKByM5OTk5OTlSByMyMjg4YmJaC3RyYW5zcGFyZW50\x26pageSize\x3d21\x26postID\x3d5401046714209368399\x26origin\x3dhttps://neopythonic.blogspot.com/");
              },
              'open': function(url) {
                window.followersIframe.close();
                followersIframeOpen(url);
              },
              'blogger-ping': function() {
              }
            }
          });
        }
      });
    }
    followersIframeOpen("https://www.blogger.com/followers.g?blogID\x3d4195135246107166251\x26colors\x3dCgt0cmFuc3BhcmVudBILdHJhbnNwYXJlbnQaByM2NjY2NjYiByMyMjg4YmIqByNmZmZmZmYyByMwMDAwMDA6ByM2NjY2NjZCByMyMjg4YmJKByM5OTk5OTlSByMyMjg4YmJaC3RyYW5zcGFyZW50\x26pageSize\x3d21\x26postID\x3d5401046714209368399\x26origin\x3dhttps://neopythonic.blogspot.com/");
  </script></div>
</div>
</div>
<div class="clear"></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style="clear: both"></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class="main-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<footer>
<div class="footer-outer">
<div class="footer-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left footer-fauxborder-left">
<div class="fauxborder-right footer-fauxborder-right"></div>
<div class="region-inner footer-inner">
<div class="foot no-items section" id="footer-1"></div>
<table border="0" cellpadding="0" cellspacing="0" class="section-columns columns-2">
<tbody>
<tr>
<td class="first columns-cell">
<div class="foot no-items section" id="footer-2-1"></div>
</td>
<td class="columns-cell">
<div class="foot no-items section" id="footer-2-2"></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class="foot section" id="footer-3" name="Footer"><div class="widget Attribution" data-version="1" id="Attribution1">
<div class="widget-content" style="text-align: center;">
Simple theme. Powered by <a href="https://www.blogger.com/" target="_blank">Blogger</a>.
</div>
<div class="clear"></div>
</div></div>
</div>
</div>
<div class="footer-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class="content-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<script type="text/javascript">
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>

<script type="text/javascript" src="./Neopythonic_ Tail Recursion Elimination_files/3257101978-widgets.js.Без названия"></script>
<script type="text/javascript">
window['__wavt'] = 'AOuZoY7jpndMNdGINu03OSefRKaHwHPD6Q:1701957407499';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d4195135246107166251','//neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html','4195135246107166251');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '4195135246107166251', 'title': 'Neopythonic', 'url': 'https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html', 'canonicalUrl': 'http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html', 'homepageUrl': 'https://neopythonic.blogspot.com/', 'searchUrl': 'https://neopythonic.blogspot.com/search', 'canonicalHomepageUrl': 'http://neopythonic.blogspot.com/', 'blogspotFaviconUrl': 'https://neopythonic.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Neopythonic - Atom\x22 href\x3d\x22https://neopythonic.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Neopythonic - RSS\x22 href\x3d\x22https://neopythonic.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Neopythonic - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/4195135246107166251/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Neopythonic - Atom\x22 href\x3d\x22https://neopythonic.blogspot.com/feeds/5401046714209368399/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/32aae95cd0866419', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '5401046714209368399', 'pageName': 'Tail Recursion Elimination', 'pageTitle': 'Neopythonic: Tail Recursion Elimination'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'Simple', 'localizedName': 'Simple', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false, 'variant': 'simplysimple', 'variantId': 'simplysimple'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Tail Recursion Elimination', 'description': 'I recently posted an entry in my Python History blog on the origins of Python\x27s functional features .  A side remark about not supporting ta...', 'url': 'https://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 5401046714209368399}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/338918748-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/3268905543-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FollowersView', new _WidgetInfo('Followers1', 'sidebar-right-1', document.getElementById('Followers1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script><div id="goog-gt-tt" class="VIpgJd-yAWNEb-L7lbkb skiptranslate" style="border-radius: 12px; margin: 0 0 0 -23px; padding: 0; font-family: &#39;Google Sans&#39;, Arial, sans-serif;" data-id=""><div id="goog-gt-vt" class="VIpgJd-yAWNEb-hvhgNd"><div class=" VIpgJd-yAWNEb-hvhgNd-l4eHX-i3jM8c"><img src="./Neopythonic_ Tail Recursion Elimination_files/24px.svg" width="24" height="24" alt=""></div><div class=" VIpgJd-yAWNEb-hvhgNd-k77Iif-i3jM8c"><div class="VIpgJd-yAWNEb-hvhgNd-IuizWc" dir="ltr">Исходный текст</div><div id="goog-gt-original-text" class="VIpgJd-yAWNEb-nVMfcd-fmcmS VIpgJd-yAWNEb-hvhgNd-axAV1"></div></div><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid ltr"><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid-B7I4Od ltr" dir="ltr"><div class="VIpgJd-yAWNEb-hvhgNd-UTujCb">Оцените этот перевод</div><div class="VIpgJd-yAWNEb-hvhgNd-eO9mKe">Ваш отзыв поможет нам улучшить Google Переводчик</div></div><div class="VIpgJd-yAWNEb-hvhgNd-xgov5 ltr"><button id="goog-gt-thumbUpButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Хороший перевод" aria-label="Хороший перевод" aria-pressed="false"><span id="goog-gt-thumbUpIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7H2v13h16c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM7 18H4V9h3v9zm14-7l-3 7H9V8l4.34-4.34L12 9h9v2z"></path></svg></span><span id="goog-gt-thumbUpIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7v13h11c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM5 7H1v13h4V7z"></path></svg></span></button><button id="goog-gt-thumbDownButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Плохой перевод" aria-label="Плохой перевод" aria-pressed="false"><span id="goog-gt-thumbDownIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7h5V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zM17 6h3v9h-3V6zM3 13l3-7h9v10l-4.34 4.34L12 15H3v-2z"></path></svg></span><span id="goog-gt-thumbDownIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zm16 0h4V4h-4v13z"></path></svg></span></button></div></div><div id="goog-gt-votingHiddenPane" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><form id="goog-gt-votingForm" action="https://translate.googleapis.com/translate_voting?client=tee" method="post" target="votingFrame" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><input type="text" name="sl" id="goog-gt-votingInputSrcLang"><input type="text" name="tl" id="goog-gt-votingInputTrgLang"><input type="text" name="query" id="goog-gt-votingInputSrcText"><input type="text" name="gtrans" id="goog-gt-votingInputTrgText"><input type="text" name="vote" id="goog-gt-votingInputVote"></form><iframe name="votingFrame" frameborder="0" src="./Neopythonic_ Tail Recursion Elimination_files/saved_resource.html"></iframe></div></div></div>

<div class="VIpgJd-ZVi9od-aZ2wEe-wOHMyf"><div class="VIpgJd-ZVi9od-aZ2wEe-OiiCO"><svg xmlns="http://www.w3.org/2000/svg" class="VIpgJd-ZVi9od-aZ2wEe" width="96px" height="96px" viewBox="0 0 66 66"><circle class="VIpgJd-ZVi9od-aZ2wEe-Jt5cK" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><iframe frameborder="0" class="VIpgJd-ZVi9od-xl07Ob-OEVmcd skiptranslate" title="Язык виджета Google Переводчика" style="visibility: visible; box-sizing: content-box; width: 1525px; height: 263px; display: none;" src="./Neopythonic_ Tail Recursion Elimination_files/saved_resource(1).html"></iframe><iframe frameborder="0" class="VIpgJd-ZVi9od-xl07Ob-OEVmcd skiptranslate" title="Язык виджета Google Переводчика" style="visibility: visible; box-sizing: content-box; width: 241px; height: 69px; display: none;" src="./Neopythonic_ Tail Recursion Elimination_files/saved_resource(2).html"></iframe></body></html>